{"version":3,"file":"popup.js","mappings":";;;;;;;;;;AAAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB,GAAG,YAAY;AAChC,YAAY;AACZ;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;;;;;;;;;;ACVa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAe;;;;;;;;;;;ACVF;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,kBAAe;;;;;;;;;;;ACjBF;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,WAAW,GAAG,2BAA2B,GAAG,oBAAoB,GAAG,mBAAmB,GAAG,YAAY;AACrG,0CAA0C,mBAAO,CAAC,6DAAwB;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD,YAAY;AACZ;AACA;AACA;AACA,8CAA8C;AAC9C,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC;AACD,2BAA2B;AAC3B;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD,WAAW;;;;;;;;;;;ACnEE;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sCAAsC,mBAAO,CAAC,qDAAoB;AAClE,kBAAkB,mBAAO,CAAC,uDAAqB;AAC/C,yBAAyB,mBAAO,CAAC,iEAA0B;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,2BAA2B;AAC3B;AACA;AACA,CAAC;AACD;AACA,+BAA+B,YAAY,WAAW;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB,WAAW;AAC9D;AACA;AACA,mCAAmC,eAAe,WAAW;AAC7D,mCAAmC,qBAAqB,WAAW;AACnE;AACA;AACA,+BAA+B,mBAAmB,WAAW;AAC7D,CAAC;AACD;AACA;AACA;AACA;AACA,+BAA+B,oBAAoB;AACnD;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA,gFAAgF,sBAAsB;AACtG;AACA;AACA;AACA;AACA;AACA,mCAAmC,iBAAiB,WAAW;AAC/D,KAAK;AACL;AACA;AACA,gFAAgF,sBAAsB,YAAY;AAClH;AACA;AACA;AACA,+BAA+B,qBAAqB;AACpD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,iCAAiC,iBAAiB,YAAY;AAC9D,CAAC;AACD;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;;;;;UCtHA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;UEtBA;UACA;UACA;UACA","sources":["webpack://chrome-extension-4.0-alpha/./src/constants/apiUrls.ts","webpack://chrome-extension-4.0-alpha/./src/data/ExecutionDetail.ts","webpack://chrome-extension-4.0-alpha/./src/data/UiPathEvent.ts","webpack://chrome-extension-4.0-alpha/./src/helpers/downloadHelper.ts","webpack://chrome-extension-4.0-alpha/./src/scripts/popup.ts","webpack://chrome-extension-4.0-alpha/webpack/bootstrap","webpack://chrome-extension-4.0-alpha/webpack/before-startup","webpack://chrome-extension-4.0-alpha/webpack/startup","webpack://chrome-extension-4.0-alpha/webpack/after-startup"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.endpoints = exports.urls = void 0;\r\nexports.urls = {\r\n    local: 'http://localhost:7099/api',\r\n    server: 'http://192.168.6.207/api',\r\n};\r\nexports.endpoints = {\r\n    xaml: '/UiPathXamlCoverter',\r\n    execution: '/execution-detail',\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass ExecutionDetails {\r\n    constructor(pageTitle, scriptName, imageDataUri, xamlName) {\r\n        this.imageUri = imageDataUri;\r\n        this.pageTitle = pageTitle;\r\n        this.scriptName = scriptName;\r\n        this.xamlName = xamlName;\r\n    }\r\n}\r\nexports.default = ExecutionDetails;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UiPathEvent = void 0;\r\nclass UiPathEvent {\r\n    constructor() {\r\n        this.pageTitle = '';\r\n        this.pageUrl = '';\r\n        this.css = null;\r\n        this.eventType = '';\r\n        this.aaname = '';\r\n        this.keys = [];\r\n        this.modifierKey = '';\r\n        this.isIFrame = false;\r\n        this.isTwoKey = false;\r\n    }\r\n}\r\nexports.UiPathEvent = UiPathEvent;\r\nexports.default = UiPathEvent;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.get = exports.postExecutionDetail = exports.objectToJson = exports.downloadXML = exports.post = void 0;\r\nconst ExecutionDetail_1 = __importDefault(require(\"@/data/ExecutionDetail\"));\r\nconst post = (url, data) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const response = yield fetch(url, {\r\n        method: 'POST',\r\n        mode: 'cors',\r\n        cache: 'no-cache',\r\n        credentials: 'same-origin',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        },\r\n        redirect: 'follow',\r\n        referrerPolicy: 'no-referrer',\r\n        body: data,\r\n    });\r\n    return response.text();\r\n});\r\nexports.post = post;\r\nconst downloadXML = (XMLdata) => {\r\n    const fileName = new Date().toISOString();\r\n    let link = document.createElement('a');\r\n    link.setAttribute('style', 'display: none;');\r\n    let data = 'text/json;charset=utf-8,' + encodeURIComponent(XMLdata);\r\n    link.setAttribute('href', 'data:' + data);\r\n    link.setAttribute('download', fileName + '.xaml');\r\n    link.click();\r\n    setTimeout(function () {\r\n        link.remove();\r\n    }, 200);\r\n    return fileName;\r\n};\r\nexports.downloadXML = downloadXML;\r\nconst objectToJson = (steps) => {\r\n    if (Object.keys(steps).length > 0) {\r\n        return JSON.stringify(steps);\r\n    }\r\n    return null;\r\n};\r\nexports.objectToJson = objectToJson;\r\nconst postExecutionDetail = (fileName, url, scriptName) => __awaiter(void 0, void 0, void 0, function* () {\r\n    chrome.storage.local.get(['firstPage'], (result) => {\r\n        const requestInput = new ExecutionDetail_1.default(result.firstPage.title, scriptName ? scriptName : 'Manual', result.firstPage.uri, fileName);\r\n        const data = (0, exports.objectToJson)(requestInput);\r\n        (0, exports.post)(url, data);\r\n    });\r\n});\r\nexports.postExecutionDetail = postExecutionDetail;\r\nconst get = (url) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const response = yield fetch(url, {\r\n        method: 'GET',\r\n    });\r\n    return response.text();\r\n});\r\nexports.get = get;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UiPathEvent_1 = __importDefault(require(\"@/data/UiPathEvent\"));\r\nconst apiUrls_1 = require(\"@/constants/apiUrls\");\r\nconst downloadHelper_1 = require(\"@/helpers/downloadHelper\");\r\nconst server = apiUrls_1.urls.server;\r\nconst startButton = document.getElementById('start-button');\r\nconst stopButton = document.getElementById('stop-button');\r\nconst logs = document.getElementById('logs');\r\nconst checkbox = document.getElementById('is-tosca');\r\nconst convertJSONtoXAML = (jsonData) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const url = server + apiUrls_1.endpoints.xaml;\r\n    return yield (0, downloadHelper_1.post)(url, jsonData);\r\n});\r\nconst getCurrentTab = () => __awaiter(void 0, void 0, void 0, function* () {\r\n    const queryOptions = { active: true, currentWindow: true };\r\n    const [tab] = yield chrome.tabs.query(queryOptions);\r\n    return tab;\r\n});\r\nconst saveOpenBrowserEvent = (tab) => __awaiter(void 0, void 0, void 0, function* () {\r\n    chrome.storage.local.set({ events: [] }, () => { });\r\n    const steps = [];\r\n    const events = [];\r\n    const openBrowserEvent = new UiPathEvent_1.default();\r\n    openBrowserEvent.eventType = 'OpenBrowser';\r\n    openBrowserEvent.pageUrl = tab.url ? tab.url : '';\r\n    openBrowserEvent.pageTitle = tab.title ? tab.title : '';\r\n    if (!checkbox.checked) {\r\n        events.push(openBrowserEvent);\r\n        chrome.storage.local.set({ checked: false }, () => { });\r\n    }\r\n    else {\r\n        chrome.storage.local.set({ checked: true }, () => { });\r\n        chrome.storage.local.set({ isOpenBrowser: true }, () => { });\r\n    }\r\n    steps.push(events);\r\n    chrome.storage.local.set({ jsonObject: steps }, () => { });\r\n});\r\nconst startCaptureHandler = () => __awaiter(void 0, void 0, void 0, function* () {\r\n    startButton.style.display = 'none';\r\n    stopButton.style.display = 'block';\r\n    const tab = yield getCurrentTab();\r\n    chrome.storage.local.set({ captureStart: true }, () => __awaiter(void 0, void 0, void 0, function* () {\r\n        yield saveOpenBrowserEvent(tab);\r\n    }));\r\n    saveFirstPageDetail(tab);\r\n});\r\nconst saveFirstPageDetail = (tab) => {\r\n    chrome.tabs.sendMessage(tab === null || tab === void 0 ? void 0 : tab.id, { message: 'firstPage' }, (response) => {\r\n        const data = {\r\n            uri: response.imageDataUrl,\r\n            title: tab.title,\r\n            fileName: 'Manual',\r\n        };\r\n        chrome.storage.local.set({ firstPage: data }, () => { });\r\n    });\r\n};\r\nconst createScreenshotsZip = (tab) => {\r\n    chrome.tabs.sendMessage(tab === null || tab === void 0 ? void 0 : tab.id, { message: 'createZip' }, (_) => { });\r\n};\r\nconst stopCaptureHandler = () => __awaiter(void 0, void 0, void 0, function* () {\r\n    const events = [];\r\n    chrome.storage.local.set({ captureStart: false }, () => {\r\n        startButton.style.display = 'block';\r\n        stopButton.style.display = 'none';\r\n    });\r\n    chrome.storage.local.get(['events'], (result) => {\r\n        if (result.events)\r\n            events.push(...result.events);\r\n    });\r\n    const tab = yield getCurrentTab();\r\n    createScreenshotsZip(tab);\r\n    retrieveAndDownload(events);\r\n});\r\nconst retrieveAndDownload = (events) => {\r\n    const storedEvents = [];\r\n    chrome.storage.local.get(['jsonObject'], (result) => __awaiter(void 0, void 0, void 0, function* () {\r\n        const jsonResultSet = result.jsonObject;\r\n        storedEvents.push(...jsonResultSet);\r\n        if (events.length > 0) {\r\n            storedEvents.push(events);\r\n        }\r\n        const data = (0, downloadHelper_1.objectToJson)(storedEvents);\r\n        if (data) {\r\n            const xml = yield convertJSONtoXAML(data);\r\n            const fileName = (0, downloadHelper_1.downloadXML)(xml);\r\n            yield (0, downloadHelper_1.postExecutionDetail)(fileName, server + apiUrls_1.endpoints.execution);\r\n        }\r\n        chrome.storage.local.clear();\r\n    }));\r\n};\r\nconst showLogs = () => __awaiter(void 0, void 0, void 0, function* () {\r\n    chrome.runtime.sendMessage({ message: 'logs' }, (_) => { });\r\n});\r\nwindow.onload = () => {\r\n    chrome.storage.local.get(['captureStart'], (result) => {\r\n        startButton.style.display = result.captureStart ? 'none' : 'block';\r\n        stopButton.style.display = result.captureStart ? 'block' : 'none';\r\n    });\r\n    chrome.storage.local.get(['checked'], (result) => {\r\n        if (result.checked)\r\n            checkbox.checked = true;\r\n    });\r\n};\r\nlogs.addEventListener('click', showLogs);\r\nstartButton.addEventListener('click', startCaptureHandler);\r\nstopButton.addEventListener('click', stopCaptureHandler);\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/scripts/popup.ts\");\n",""],"names":[],"sourceRoot":""}